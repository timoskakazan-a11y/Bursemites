<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bursemites - Добро пожаловать!</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;800&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --brand-color: #003399;
            --text-color: #ffffff;
            --glass-bg: rgba(30, 50, 120, 0.3);
            --glass-border: rgba(255, 255, 255, 0.2);
            --glow-color: rgba(100, 150, 255, 0.5);
        }

        html, body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            font-family: 'Manrope', sans-serif; 
            overflow: hidden;
            color: var(--text-color);
            /* УЛУЧШЕННЫЙ ФОН: добавляет глубины */
            background: var(--brand-color);
            background: radial-gradient(circle at top left, #0055ff, var(--brand-color) 60%);
        }

        /* --- ЭКРАН ЗАЩИТЫ --- */
        #protection-screen {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            height: 100%;
            flex-direction: column;
            text-align: center;
        }
        #protection-screen .logo-img { max-width: 250px; margin-bottom: 40px; }
        #protection-screen h1 { font-size: clamp(1.6rem, 5vw, 2.6rem); }

        /* --- ОСНОВНОЙ КОНТЕНТ (СЛАЙДЕР) --- */
        #main-content {
            display: none;
            justify-content: center;
            align-items: center;
            width: 100%;
            height: 100%;
            padding: 20px;
            box-sizing: border-box;
            position: relative;
        }

        .slider-container {
            width: 100%;
            /* УВЕЛИЧЕННЫЙ РАЗМЕР КАРТОЧЕК НА ПК */
            max-width: 580px;
            overflow: hidden;
            perspective: 1500px; /* Для 3D эффекта */
        }

        .slider-wrapper {
            display: flex;
            /* Улучшенная плавная анимация */
            transition: transform 0.8s cubic-bezier(0.86, 0, 0.07, 1);
        }

        /* --- НОВЫЙ УЛУЧШЕННЫЙ ДИЗАЙН КАРТОЧЕК --- */
        .card {
            flex: 0 0 100%;
            box-sizing: border-box;
            padding: 40px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            /* УВЕЛИЧЕНА ВЫСОТА */
            min-height: 450px;
            position: relative;
            
            /* УЛУЧШЕННЫЙ ЭФФЕКТ СТЕКЛА */
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-radius: 24px;
            border: 1px solid var(--glass-border);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
            
            /* УЛУЧШЕНО РАСПОЛОЖЕНИЕ ТЕКСТА */
            text-align: left;
            transition: opacity 0.5s ease, transform 0.5s ease;
        }

        .card-logo {
            width: 150px;
            margin-bottom: 30px;
            opacity: 0.9;
        }
        
        .card-content h2 {
            font-weight: 800;
            font-size: clamp(2rem, 5vw, 2.5rem);
            margin: 0;
            line-height: 1.2;
        }

        .card-content p {
            font-weight: 400;
            font-size: clamp(1rem, 3vw, 1.1rem);
            line-height: 1.6;
            opacity: 0.8;
            margin-top: 20px;
            max-width: 90%; /* Чтобы текст не прилипал к краям */
        }

        .next-btn {
            font-family: 'Manrope', sans-serif;
            font-weight: 800;
            font-size: 16px;
            padding: 14px 45px;
            border-radius: 12px;
            border: none;
            cursor: pointer;
            background-color: var(--text-color);
            color: var(--brand-color);
            transition: transform 0.2s ease;
            margin-top: 40px;
            align-self: flex-start; /* Кнопка теперь слева */
        }
        .next-btn:hover { transform: scale(1.05); }
        
        /* --- НОВАЯ АНИМАЦИЯ "УЛЕТАЮЩЕЙ" КАРТОЧКИ --- */
        @keyframes fly-out {
            to {
                transform: translateX(-100%) rotateZ(-15deg) scale(0.7);
                opacity: 0;
            }
        }
        .card.leaving {
            /* Применяем анимацию */
            animation: fly-out 0.8s cubic-bezier(0.76, 0, 0.24, 1) forwards;
        }

        /* --- АДАПТИВНОСТЬ --- */
        @media (max-width: 768px) {
            .next-btn { display: none; } /* Скрываем кнопки на мобильных */
            .card { padding: 30px; min-height: 480px; }
            .card-content h2 { font-size: 1.8rem; }
            .card-content p { font-size: 1rem; }
        }

        /* Подсказка для свайпа (без изменений) */
        #swipe-hint {
            display: none;
            position: absolute; bottom: 25px; left: 50%; transform: translateX(-50%);
            align-items: center; gap: 10px; padding: 8px 15px;
            background: rgba(0,0,0,0.3); border-radius: 20px;
            pointer-events: none;
        }
        @media(max-width: 768px) { #swipe-hint { display: flex; } }
        #swipe-hint img { width: 24px; filter: invert(1); }

    </style>
</head>
<body>

    <!-- ЭКРАН 1: ЗАЩИТА -->
    <div id="protection-screen">
        <img src="https://i.postimg.cc/MZQsbd1h/Group.png" alt="Логотип Bursemites" class="logo-img">
        <h1>Проверка доступа...</h1>
    </div>

    <!-- ЭКРАН 2: ОСНОВНОЙ КОНТЕНТ (СЛАЙДЕР) -->
    <div id="main-content">
        <div class="slider-container">
            <div class="slider-wrapper">
                <!-- Карточка 1 -->
                <div class="card">
                    <div>
                        <img src="https://i.postimg.cc/MZQsbd1h/Group.png" class="card-logo" alt="Логотип">
                        <div class="card-content">
                            <h2>Добро пожаловать в Bursemites!</h2>
                            <p>Вам выдали доступ для теста эксклюзивной версии.</p>
                        </div>
                    </div>
                    <button class="next-btn">Дальше</button>
                </div>
                <!-- Карточка 2 -->
                <div class="card">
                    <div>
                        <img src="https://i.postimg.cc/MZQsbd1h/Group.png" class="card-logo" alt="Логотип">
                        <div class="card-content">
                            <h2>Безграничные возможности</h2>
                            <p>Продавайте на бирже товары, устраивайте аукционы, выбирайте наилучших покупателей.</p>
                        </div>
                    </div>
                    <button class="next-btn">Дальше</button>
                </div>
                <!-- Карточка 3 -->
                <div class="card">
                     <div>
                        <img src="https://i.postimg.cc/MZQsbd1h/Group.png" class="card-logo" alt="Логотип">
                        <div class="card-content">
                           <h2>Все под рукой</h2>
                           <p>Удобный современный интерфейс, наилучшие подборки и встроенный маркетплейс.</p>
                        </div>
                    </div>
                    <button class="next-btn" id="start-btn">Начать</button>
                </div>
            </div>
        </div>
        <!-- Подсказка для свайпа -->
        <div id="swipe-hint">
            <img src="https://www.svgrepo.com/show/493721/hand-drag.svg" alt="Swipe">
            <span>Смахните</span>
        </div>
    </div>

    <script>
        // БЛОК 1: ПРОВЕРКА IP
        (function() {
            const authorizedIp = '5.59.98.46';
            const fallbackPage = 'index.html';
            const protectionScreen = document.getElementById('protection-screen');
            const mainContent = document.getElementById('main-content');

            // Используем fetch для получения IP-адреса. [8]
            fetch('https://api.ipify.org?format=json')
                .then(response => response.ok ? response.json() : Promise.reject('Network error'))
                .then(data => {
                    if (data.ip === authorizedIp) {
                        protectionScreen.style.display = 'none';
                        mainContent.style.display = 'flex';
                        initializeSlider();
                    } else {
                        window.location.replace(fallbackPage);
                    }
                })
                .catch(error => {
                    console.error('IP Check Error:', error);
                    window.location.replace(fallbackPage);
                });
        })();

        // БЛОК 2: УЛУЧШЕННАЯ ЛОГИКА СЛАЙДЕРА
        function initializeSlider() {
            const sliderWrapper = document.querySelector('.slider-wrapper');
            const cards = document.querySelectorAll('.card');
            const nextBtns = document.querySelectorAll('.next-btn');
            const sliderContainer = document.querySelector('.slider-container');
            
            let currentIndex = 0;
            let isTransitioning = false;
            const totalSlides = cards.length;

            function goToSlide(newIndex) {
                if (isTransitioning || newIndex < 0 || newIndex >= totalSlides) return;
                isTransitioning = true;

                const currentCard = cards[currentIndex];
                // Применяем класс анимации "улетания" к текущей карточке
                currentCard.classList.add('leaving');

                currentIndex = newIndex;
                
                // Для мобильных устройств, где кнопок нет, свайп на последнем слайде ничего не делает
                if(window.innerWidth <= 768 && newIndex >= totalSlides -1) {
                     // Можно добавить действие для последнего свайпа, если нужно
                }
            }

            // Логика для кнопок на ПК
            nextBtns.forEach((button, index) => {
                button.addEventListener('click', () => {
                    if (index < totalSlides - 1) {
                        goToSlide(index + 1);
                    } else {
                        alert('Добро пожаловать в систему!');
                        // window.location.href = '/dashboard.html';
                    }
                });
            });

            // Когда анимация СДВИГА КОНТЕЙНЕРА завершена, проводим очистку
            sliderWrapper.addEventListener('transitionend', () => {
                // Сдвигаем контейнер на новую позицию
                sliderWrapper.style.transform = `translateX(-${currentIndex * 100}%)`;

                // Убираем анимацию "улетания" с предыдущей карточки, чтобы ее можно было показать снова
                const prevCard = cards[currentIndex - 1];
                if(prevCard) {
                    prevCard.classList.remove('leaving');
                }
                isTransitioning = false;
            });
            
            // Логика свайпов для мобильных (без изменений, но работает с новой анимацией)
            let touchStartX = 0;
            sliderContainer.addEventListener('touchstart', e => { touchStartX = e.changedTouches[0].screenX; }, { passive: true });
            sliderContainer.addEventListener('touchend', e => {
                const touchEndX = e.changedTouches[0].screenX;
                const swipeThreshold = 50;
                if (touchEndX < touchStartX - swipeThreshold) {
                    goToSlide(currentIndex + 1);
                } else if (touchEndX > touchStartX + swipeThreshold) {
                    // Свайп назад пока отключен для простоты, но можно добавить
                    // goToSlide(currentIndex - 1);
                }
            });
        }
    </script>

</body>
</html>
