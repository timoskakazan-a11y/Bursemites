<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Главная страница</title>

    <script>
        // --- НАЧАЛО: Скрипт защиты страницы ---
        (function() {
            const authorizedIp = '5.59.98.46';
            const fallbackPage = 'index.html'; // Укажите имя вашей страницы-заглушки

            // Используем fetch для получения IP-адреса. [8]
            // Сервис ipify возвращает IP в формате JSON. [9]
            fetch('https://api.ipify.org?format=json')
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    return response.json();
                })
                .then(data => {
                    // ЕСЛИ IP-адрес НЕ совпадает с разрешенным
                    if (data.ip !== authorizedIp) {
                        // Немедленно перенаправляем на страницу-заглушку. [2]
                        // window.location.replace не сохраняет эту страницу в истории браузера. [6]
                        window.location.replace(fallbackPage);
                    }
                    // Если IP совпадает, ничего не делаем, и пользователь увидит содержимое страницы.
                })
                .catch(error => {
                    console.error('Ошибка при проверке IP-адреса:', error);
                    // В случае ошибки (например, сервис ipify недоступен), 
                    // для безопасности также перенаправляем на заглушку.
                    window.location.replace(fallbackPage);
                });
        })();
        // --- КОНЕЦ: Скрипт защиты страницы ---
    </script>

    <style>
        body { font-family: sans-serif; text-align: center; margin-top: 50px; }
    </style>
</head>
<body>

    <h1>Добро пожаловать!</h1>
    <p>Это защищенная страница `home.html`.</p>
    <p>Вы видите ее, потому что ваш IP-адрес авторизован.</p>

</body>
</html>
